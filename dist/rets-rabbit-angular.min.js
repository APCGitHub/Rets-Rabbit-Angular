!function(){"use strict";function t(t){t.interceptors.push("SessionInterceptorFactory")}angular.module("rets-rabbit-angular.config",[]).config(t),t.$inject=["$httpProvider"]}();
!function(){"use strict";angular.module("rets-rabbit-angular",["rets-rabbit-angular.config","rets-rabbit-angular.factories","rets-rabbit-angular.providers","rets-rabbit-angular.services"])}();
!function(){"use strict";function e(e,n,t,r){function o(){var o=n.defer();return e({method:"POST",url:t.v1.baseUrl+"api/oauth/access_token",config:{ignoreAuth:!0,version:1},data:i({client_id:t.v1.clientId,client_secret:t.v1.clientSecret,grant_type:"client_credentials"}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){r.v1.saveToken(e.access_token),o.resolve(e)},function(e){o.reject(e)}),o.promise}function c(){var o=n.defer();return e({method:"POST",url:t.v2.baseUrl+"api/oauth/access_token",config:{ignoreAuth:!0,version:2},headers:{"Content-Type":"application/x-www-form-urlencoded"},data:i({client_id:t.v2.clientId,client_secret:t.v2.clientSecret,grant_type:"client_credentials"})}).then(function(e){r.v2.saveToken(e.access_token),o.resolve(e)},function(e){o.reject(e)}),o.promise}function i(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")}var a={getTokenV1:o,getTokenV2:c};return a}angular.module("rets-rabbit-angular.factory.auth",[]).factory("RRAuthFactory",e),e.$inject=["$http","$q","ApiConfig","KeyStorageService"]}();
!function(){"use strict";angular.module("rets-rabbit-angular.factories",["rets-rabbit-angular.factory.auth","rets-rabbit-angular.factory.metadata","rets-rabbit-angular.factory.queries","rets-rabbit-angular.factory.properties.v1","rets-rabbit-angular.factory.properties.v2","rets-rabbit-angular.factory.session.interceptor"])}();
!function(){"use strict";function e(){function e(){return[{name:"ListPrice",type:"Number"},{name:"ListingId",type:"String"},{name:"ListingKey",type:"Number"},{name:"OriginatingSystemKey",type:"String"},{name:"StandardStatus",type:"String"},{name:"ListingContractDate",type:"Date"},{name:"PurchaseContractDate",type:"Date"},{name:"CloseDate",type:"Date"},{name:"ModificationTimestamp",type:"Timestamp"},{name:"StatusChangeTimestamp",type:"Timestamp"},{name:"MajorChangeType",type:"String"},{name:"OriginalEntryTimestamp",type:"Timestamp"},{name:"OnMarketTimestamp",type:"Timestamp"},{name:"OffMarketTimestamp",type:"Timestamp"},{name:"DaysOnMarket",type:"Number"},{name:"CumulativeDaysOnMarket",type:"Number"},{name:"ClosePrice",type:"Number"},{name:"ListPrice",type:"Number"},{name:"OriginalListPrice",type:"Number"},{name:"ListPriceLow",type:"Number"},{name:"InternetEntireListingDisplayYN",type:"Boolean"},{name:"InternetAddressDisplayYN",type:"Boolean"},{name:"PhotosCount",type:"Number"},{name:"PhotosChangeTimestamp",type:"Timestamp"},{name:"VirtualTourURLUnbranded",type:"String"},{name:"PublicRemarks",type:"String"},{name:"StreetNumber",type:"String"},{name:"StreetNumberNumeric",type:"Number"},{name:"StreetName",type:"String"},{name:"StreetSuffix",type:"String"},{name:"City",type:"String"},{name:"StateOrProvince",type:"String"},{name:"PostalCode",type:"Number"},{name:"PostalCodePlus4",type:"Number"},{name:"CountyOrParish",type:"String"},{name:"MLSAreaMajor",type:"String"},{name:"Directions",type:"String"},{name:"ListAgentFirstName",type:"String"},{name:"ListAgentLastName",type:"String"},{name:"ListAgentMlsId",type:"String"},{name:"ListAgentStateLicense",type:"Number"},{name:"ListOfficeName",type:"String"},{name:"ListOfficeMlsId",type:"String"},{name:"BuyerAgentFirstName",type:"String"},{name:"BuyerAgentLastName",type:"String"},{name:"BuyerAgentMlsId",type:"String"},{name:"BuyerAgentStateLicense",type:"Number"},{name:"BuyerOfficeName",type:"String"},{name:"BuyerOfficeMlsId",type:"String"}]}var t={fields:e};return t}angular.module("rets-rabbit-angular.factory.metadata",[]).factory("MetadataFactory",e)}();
!function(){"use strict";function e(){function e(){return[{title:"Equals Comparison",description:"Get properties where the Listing Agent's last name (field ListAgentLastName) is 'Smith' (case sensitive).",query:{select:"ListingId, ListPrice, ListAgentFirstName, ListAgentLastName",filter:[{value:"ListAgentLastName eq 'Smith'",join:"and"}],orderby:[],top:"",skip:""}},{title:"Multiple Field Values",description:"This query gets properties where the listing agent's last name is either 'Smith' or 'Doe'.",query:{select:"ListingId, ListPrice, ListAgentFirstName",filter:[{value:"ListAgentLastName eq 'Doe'",join:"or"},{value:"ListAgentLastName eq 'Smith'",join:"and"}],orderby:[],top:"",skip:""}},{title:"Wildcard Search",description:"You can do wildcard or case insensitive searches by using the special string functions with the $filter option.",query:{select:"ListingId, ListPrice, ListAgentFirstName",filter:[{value:"startswith(ListAgentFirstName, 'joh')",join:"and"}],orderby:[],top:"",skip:""}},{title:"Numeric Range",description:"This query selects properties with a listing price between $50K & $200K .",query:{select:"ListingId, ListPrice",filter:[{value:"ListPrice ge 50000",join:"and"},{value:"ListPrice le 200000",join:""}],orderby:[],top:"",skip:""}},{title:"Date Filtering",description:"This query gets properties listed in June 2016 by the ListingContractDate field.",query:{select:"ListingId, ListPrice, ListingContractDate",filter:[{value:"year(ListingContractDate) eq 2016",join:"and"},{value:"month(ListingContractDate) eq 6",join:""}],orderby:[],top:"",skip:""}},{title:"Sorting",description:"This query is sorted (asc) by the ListPrice field.",query:{select:"ListingId, ListPrice, ListingContractDate",filter:[{value:"year(ListingContractDate) eq 2016",join:"and"},{value:"month(ListingContractDate) eq 6",join:""}],orderby:[{value:"ListPrice",direction:"asc"}],top:"",skip:""}},{title:"Pagination",description:"This query gets the next set of results by passing a $skip parameter value of 11 with a $top value of 10.",query:{select:"ListingId, ListPrice, ListingContractDate",filter:[{value:"year(ListingContractDate) eq 2016",join:"and"},{value:"month(ListingContractDate) eq 6",join:""}],orderby:[{value:"ListPrice",direction:"asc"}],top:"10",skip:"11"}}]}var t={queries:e};return t}angular.module("rets-rabbit-angular.factory.queries",[]).factory("QueryFactory",e)}();
!function(){"use strict";function e(e,r,n,t){function o(n){var t=n.config.config||{};if(!t.ignoreAuth&&401==n.status&&i<c){i++;var o=e.get("RRAuthFactory"),u=e.get("$http"),s=r.defer();return 1==t.version&&o.getTokenV1().then(function(e){s.resolve(e)},function(e){s.reject(e)}),2==t.version&&o.getTokenV2().then(function(e){s.resolve(e)},function(e){s.reject(e)}),s.promise.then(function(){console.log(n.config);var e="";return n.config.headers.Authorization="Bearer "+e,u(n.config)},function(e){return r.reject(n)})}return i=0,r.reject(n)}var i=0,c=5,u={responseError:o};return u}angular.module("rets-rabbit-angular.factory.session.interceptor",[]).factory("SessionInterceptorFactory",e),e.$inject=["$injector","$q","$window","KeyStorageService"]}();
!function(){"use strict";function e(e,r,t,n){function o(o,a){var i=e.defer();return r.get(t.v1.apiUrl+o+"/listing/search?"+a,{headers:{Authorization:"Bearer "+n.v1.getToken()}}).then(function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}function a(o){var a=e.defer();return r.get(t.v1.apiUrl+o+"/metadata/explorer",{headers:{Authorization:"Bearer "+n.v1.getToken()}}).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}function i(){var o=e.defer();return r.get(t.v1.apiUrl+"server",{headers:{Authorization:"Bearer "+n.v1.getToken()}}).then(function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}var c={search:o,metadata:a,servers:i};return c}angular.module("rets-rabbit-angular.factory.properties.v1",[]).factory("PropertyFactoryV1",e),e.$inject=["$q","$http","ApiConfig","KeyStorageService"]}();
!function(){"use strict";function e(e,r,t,n){function a(a,o){var i=r.defer();return e.get(t.v2.apiUrl+"property("+a+")",{params:o,headers:{Authorization:"Bearer "+n.v2.getToken()}}).then(function(e){var r=e.value;i.resolve(r)},function(e){i.reject(e)}),i.promise}function o(){var a=r.defer();return e.get(t.v2.apiUrl+"property/$metadata",{headers:{Authorization:"Bearer "+n.v2.getToken()}}).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}function i(a){var o=r.defer();encodeURIComponent(a);return e.get(t.v2.apiUrl+"property?"+a,{headers:{Accept:"odata.metadata=full",Authorization:"Bearer "+n.v2.getToken()}}).then(function(e){o.resolve(e.data.access_token)},function(e){o.reject(e)}),o.promise}var c={findOne:a,metadata:o,search:i};return c}angular.module("rets-rabbit-angular.factory.properties.v2",[]).factory("PropertyFactoryV2",e),e.$inject=["$http","$q","ApiConfig","KeyStorageService"]}();
!function(){"use strict";function e(){var e={v1:{baseUrl:"https://stage.retsrabbit.com/",apiEndPoint:"api/v1/",clientId:"retsrabbit",clientSecret:"retsrabbit",storageKey:"access_token_v1"},v2:{baseUrl:"https://stage.retsrabbit.com/",apiEndPoint:"api/v2/",clientId:"retsrabbit",clientSecret:"retsrabbit",storageKey:"access_token_v2"}},t={v1:{setBaseUrl:function(t){""!==t&&(e.v1.baseUrl=t,"/"!==e.v1.baseUrl[e.v1.baseUrl.length-1]&&(e.v1.baseUrl+="/"))},setApiEndPoint:function(t){e.v1.apiEndPoint=t},setClientId:function(t){e.v1.clientId=t},setClientSecret:function(t){e.v1.clientSecret=t},setStorageKey:function(t){e.v1.storageKey=t}},v2:{setBaseUrl:function(t){""!==t&&(e.v2.baseUrl=t,"/"!==e.v2.baseUrl[e.v2.baseUrl.length-1]&&(e.v2.baseUrl+="/"))},setApiEndPoint:function(t){e.v2.apiEndPoint=t},setClientId:function(t){e.v2.clientId=t},setClientSecret:function(t){e.v2.clientSecret=t},setStorageKey:function(t){e.v2.storageKey=t}},$get:function(){return{v1:{baseUrl:e.v1.baseUrl,apiUrl:e.v1.baseUrl+e.v1.apiEndPoint,clientId:e.v1.clientId,clientSecret:e.v1.clientSecret,storageKey:e.v1.storageKey},v2:{baseUrl:e.v2.baseUrl,apiUrl:e.v2.baseUrl+e.v2.apiEndPoint,clientId:e.v2.clientId,clientSecret:e.v2.clientSecret,storageKey:e.v2.storageKey}}}};return t}angular.module("rets-rabbit-angular.provider.api",[]).provider("ApiConfig",e),e.$inject=[]}();
!function(){"use strict";angular.module("rets-rabbit-angular.providers",["rets-rabbit-angular.provider.api"])}();
!function(){"use strict";angular.module("rets-rabbit-angular.services",["rets-rabbit-angular.service.key_storage"])}();
!function(){"use strict";function e(e,t){this.v1={saveToken:function(o){var r=t.v1.storageKey;e.localStorage.setItem(r,o)},getToken:function(){var o=t.v1.storageKey,r=e.localStorage.getItem(o);return r}},this.v2={saveToken:function(o){var r=t.v2.storageKey;e.localStorage.setItem(r,o)},getToken:function(){var o=t.v2.storageKey,r=e.localStorage.getItem(o);return r}}}angular.module("rets-rabbit-angular.service.key_storage",[]).service("KeyStorageService",e),e.$inject=["$window","ApiConfig"]}();